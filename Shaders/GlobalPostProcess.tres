[gd_resource type="Shader" format=2]

[resource]
code = "shader_type canvas_item;
uniform float magnitude = 500f;
uniform float healthmag = 100f;

float random (vec2 st) {
    return fract(sin(dot(st.xy,vec2(12.9898,78.233)))*43758.5453123);
}

void fragment(){
	vec2 newUV = vec2(floor(UV.x*magnitude)/magnitude,floor(UV.y*magnitude)/magnitude);
	COLOR = texture(TEXTURE, newUV);
	float offset = random(vec2((UV.x+TIME)-(UV.y+TIME),UV.x+UV.y+TIME));
	COLOR.a += offset/5f;
	
	COLOR.r += 0.0001f;
	COLOR.r *= 1f+ (healthmag/250f)*abs(random(UV+TIME*10f));
	COLOR.gb *= 1f- (healthmag/80f)*abs(random(UV+TIME*10f));
	
}
"
